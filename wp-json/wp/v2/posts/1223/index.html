{"id":1223,"date":"2019-12-06T23:20:00","date_gmt":"2019-12-07T04:20:00","guid":{"rendered":"https:\/\/ricardoromo.co\/?p=1223"},"modified":"2021-07-17T13:40:10","modified_gmt":"2021-07-17T18:40:10","slug":"crea-una-servidor-de-sala-de-chat-en-c","status":"publish","type":"post","link":"https:\/\/3.214.197.113\/2019\/crea-una-servidor-de-sala-de-chat-en-c\/","title":{"rendered":"Como crear una Sala de Chat en C"},"content":{"rendered":"<div class='booster-block booster-read-block'>\r\n                <div class=\"twp-read-time\">\r\n                \t<i class=\"booster-icon twp-clock\"><\/i> <span>Tiempo de lectura:<\/span>1 Minutos, 55 Segundos                <\/div>\r\n\r\n            <\/div>\n<div class=\"is-layout-flow wp-block-group\"><div class=\"wp-block-group__inner-container\">\n<div class=\"is-layout-flex wp-block-buttons\">\n<div class=\"wp-block-button\"><a class=\"wp-block-button__link\" href=\"http:\/\/3.214.197.113\/2019\/crea-una-servidor-de-sala-de-chat-en-c\/\"><span class=\"has-inline-color has-pale-cyan-blue-color\">Parte 1<\/span><\/a><\/div>\n\n\n\n<div class=\"wp-block-button\"><a class=\"wp-block-button__link\" href=\"http:\/\/3.214.197.113\/2019\/crea-una-servidor-de-sala-de-chat-en-c-cliente\/\">Parte 2<\/a><\/div>\n\n\n\n<div class=\"wp-block-button\"><a class=\"wp-block-button__link\" href=\"http:\/\/3.214.197.113\/2019\/crea-una-servidor-de-sala-de-chat-en-c-servidor\/\">Parte 3<\/a><\/div>\n\n\n\n<div class=\"wp-block-button\"><a class=\"wp-block-button__link\" href=\"http:\/\/3.214.197.113\/2019\/crea-una-servidor-de-sala-de-chat-en-c-final\/\">Parte 4<\/a><\/div>\n<\/div>\n<\/div><\/div>\n\n\n\n<p>Para este tutorial estaremos implementando una sala de chat de consola, para hasta 100 usuarios. El alcance de este proyecto permitir\u00e1 desde una computadora local conectar varias terminales a modo de una sala de chat. El sistema de archivos ser\u00e1 el siguiente:<\/p>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-large\"><a href=\"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2021\/07\/Sala-de-chat-en-C-file_system-2.png\"><img decoding=\"async\" loading=\"lazy\" width=\"361\" height=\"89\" src=\"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2021\/07\/Sala-de-chat-en-C-file_system-2.png?resize=361%2C89\" alt=\"\" class=\"wp-image-2232\" srcset=\"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2021\/07\/Sala-de-chat-en-C-file_system-2.png?w=361&amp;ssl=1 361w, https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2021\/07\/Sala-de-chat-en-C-file_system-2.png?resize=300%2C74&amp;ssl=1 300w\" sizes=\"(max-width: 361px) 100vw, 361px\" data-recalc-dims=\"1\" \/><\/a><\/figure><\/div>\n\n\n\n<p>Vamos a tener una librer\u00eda sencilla con funciones comunes y luego tendremos un c\u00f3digo para el servidor y otro c\u00f3digo para los clientes; si no sabes como crear una librer\u00eda te invito a ver este <a href=\"https:\/\/ricardoromo.co\/2019\/como-crear-una-libreria-en-c-c\/\">tutorial <\/a>donde ense\u00f1o a crear una. <\/p>\n\n\n\n<p>La comunicaci\u00f3n entre los clientes se realiza a trav\u00e9s del servidor que funcionara como broker de mensajes, reenviando los mensajes de un cliente a los restantes que est\u00e9n conectados a la sala de chat.<\/p>\n\n\n\n<h2><strong>Requisitos:<\/strong><\/h2>\n\n\n\n<ul><li>Sistema operativo Linux.<\/li><li> Tener conocimientos del lenguaje C. <\/li><\/ul>\n\n\n\n<p>Antes de empezar a escribir c\u00f3digo, definimos un esquema sobre c\u00f3mo funcionar\u00e1 la sala de chat.<\/p>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-large\"><a href=\"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2021\/07\/Sala-de-chat-en-C-esquema-del-sistema.png\"><img decoding=\"async\" loading=\"lazy\" width=\"640\" height=\"765\" src=\"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2021\/07\/Sala-de-chat-en-C-esquema-del-sistema.png?resize=640%2C765\" alt=\"arquitectura-sala-chat\" class=\"wp-image-2234\" srcset=\"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2021\/07\/Sala-de-chat-en-C-esquema-del-sistema.png?w=648&amp;ssl=1 648w, https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2021\/07\/Sala-de-chat-en-C-esquema-del-sistema.png?resize=251%2C300&amp;ssl=1 251w\" sizes=\"(max-width: 640px) 100vw, 640px\" data-recalc-dims=\"1\" \/><\/a><figcaption>Diagrama de bloques<\/figcaption><\/figure><\/div>\n\n\n\n<h2>Funcionamiento:<\/h2>\n\n\n\n<ul><li>Del lado del servidor, tenemos un socket conectado a un puerto de la m\u00e1quina que constantemente est\u00e1 escuchando los usuarios que se conectan al servidor.&nbsp;<\/li><li>Una vez se conecte un usuario, este proceso toma los datos del usuario como el nombre y los guarda en una estructura, esta estructura tiene la direcci\u00f3n del usuario, el socket por el que se conect\u00f3, un ID y el nombre.<\/li><\/ul>\n\n\n\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"c\" data-enlighter-theme=\"\" data-enlighter-highlight=\"\" data-enlighter-linenumbers=\"\" data-enlighter-lineoffset=\"\" data-enlighter-title=\"\" data-enlighter-group=\"\">typedef struct\n{\n\tstruct sockaddr_in address;\n\tint sock;\n\tint uid;\n\tchar name[32];\n} client_t;\n\n<\/pre>\n\n\n\n<ul><li>Una vez guardado todos estos datos, el proceso pasa a guardar al usuario en una cola y crea un hilo hijo del proceso principal, este hilo llama a la funci\u00f3n \u201cclient_handler\u201d que se encarga de recibir todos sus mensajes.&nbsp;<\/li><li>Del lado del cliente, una vez se conecta al servidor, este crea dos hilos, uno emisor para enviar mensajes al servidor y uno receptor para recibir los mensajes de los dem\u00e1s usuarios una vez pasen por el servidor.&nbsp;<\/li><li>Si cualquiera de estos pasos falla el algoritmo llama a una funci\u00f3n dentro de la librer\u00eda \u201ccommons.h\u201d que mata el proceso con una se\u00f1al de \u201cEXIT_FAILURE\u201d, indicando que el proceso ha fallado.&nbsp;<\/li><li>La sala de chat ser\u00e1 capaz de indicar cuando un usuario se conecta y cuando se desconecta.<\/li><\/ul>\n\n\n\n<p>A continuaci\u00f3n en la <a href=\"http:\/\/3.214.197.113\/2019\/crea-una-servidor-de-sala-de-chat-en-c-cliente\/\" title=\"Como crear una Sala de Chat en C \u2013 Cliente\">siguiente parte<\/a> del tutorial empezaremos con el c\u00f3digo del cliente.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Aprende a programar una sala de chat hasta para 100 usuarios. Con el lenguaje C y las tecnologias de Sockets y Threads podras lograrlo.<\/p>\n","protected":false},"author":2,"featured_media":2248,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_mi_skip_tracking":false,"jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true,"jetpack_social_options":[]},"categories":[207,3],"tags":[6,22],"jetpack_publicize_connections":[],"aioseo_notices":[],"jetpack_featured_media_url":"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2019\/12\/network.jpg?fit=1280%2C720&ssl=1","jetpack-related-posts":[{"id":1844,"url":"https:\/\/3.214.197.113\/2019\/crea-una-servidor-de-sala-de-chat-en-c-final\/","url_meta":{"origin":1223,"position":0},"title":"Como crear una Sala de Chat en C \u2013 Final","date":"diciembre 6, 2019","format":false,"excerpt":"Felicidades a todos los que llegaron hasta esta parte del tutorial, ahora vamos a ver en acci\u00f3n el proyecto final y como puedes ejecutarlo. Como saben dentro de los requisitos de este proyecto, era necesario tener un sistema linux ya que el programa utiliza librer\u00edas propias del sistema y en\u2026","rel":"","context":"En \u00abc\u00bb","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2021\/07\/chat_resultado.jpg?resize=350%2C200&ssl=1","width":350,"height":200},"classes":[]},{"id":1822,"url":"https:\/\/3.214.197.113\/2019\/crea-una-servidor-de-sala-de-chat-en-c-cliente\/","url_meta":{"origin":1223,"position":1},"title":"Como crear una Sala de Chat en C \u2013 Cliente","date":"diciembre 6, 2019","format":false,"excerpt":"Creando el cliente El cliente es quien se conectar\u00e1 al servidor, quien enviar\u00e1 mensajes y recibir\u00e1 mensajes de otros clientes. En principio como debe ser una sala de chat. Librer\u00edas: Algunas de las librer\u00edas que estaremos utilizando seran estas: #include <stdio.h> - Contiene las definiciones de las macros, las constantes,\u2026","rel":"","context":"En \u00abc\u00bb","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2021\/07\/Argumentos-del-sistema.jpg?resize=350%2C200&ssl=1","width":350,"height":200},"classes":[]},{"id":1832,"url":"https:\/\/3.214.197.113\/2019\/crea-una-servidor-de-sala-de-chat-en-c-servidor\/","url_meta":{"origin":1223,"position":2},"title":"Como crear una Sala de Chat en C &#8211; Servidor","date":"diciembre 6, 2019","format":false,"excerpt":"Creando el Servidor Parte 1 Parte 2 Parte 3 Parte 4 Descargar c\u00f3digo El servidor en este proyecto, funciona como broker de mensajes, repartiendo los mensajes entre todos los clientes menos al emisor original. Es el encargado de decidir el puerto al cual se conectar\u00e1n los clientes. Funciones: Este c\u00f3digo\u2026","rel":"","context":"En \u00abc\u00bb","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1169,"url":"https:\/\/3.214.197.113\/2019\/como-crear-una-libreria-en-c-c\/","url_meta":{"origin":1223,"position":3},"title":"Como crear una Librer\u00eda en C\/C++","date":"diciembre 3, 2019","format":false,"excerpt":"Un tutorial muy sencillo y explicativo sobre como crear una libreria para nuestros proyectos de programacion con C y C++.","rel":"","context":"En \u00abarticulo\u00bb","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2019\/12\/Fondo-HD.jpg?fit=1200%2C675&ssl=1&resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1237,"url":"https:\/\/3.214.197.113\/2020\/10-extensiones-ulites-para-vs-code\/","url_meta":{"origin":1223,"position":4},"title":"10 Extensiones para VS Code que quiz\u00e1s no conoc\u00edas","date":"enero 16, 2020","format":false,"excerpt":"Visual Studio Code, es de los editores de codigo mas usados acualmente, aqui les comparto 10 extensiones utiles para este editor.","rel":"","context":"En \u00abarticulo\u00bb","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2020\/01\/Banner_extensiones.jpg?fit=1200%2C675&ssl=1&resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1781,"url":"https:\/\/3.214.197.113\/2019\/ahorra-tiempo-mientras-usas-la-consola\/","url_meta":{"origin":1223,"position":5},"title":"Comandos de consola para productividad","date":"diciembre 12, 2019","format":false,"excerpt":"Escribe tus propios scripts de consola para automatizar rutinas en tu dia a dia como programador.","rel":"","context":"En \u00abarticulo\u00bb","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/3.214.197.113\/wp-content\/uploads\/2019\/12\/banner.jpg?fit=1200%2C675&ssl=1&resize=350%2C200","width":350,"height":200},"classes":[]}],"_links":{"self":[{"href":"https:\/\/3.214.197.113\/wp-json\/wp\/v2\/posts\/1223"}],"collection":[{"href":"https:\/\/3.214.197.113\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/3.214.197.113\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/3.214.197.113\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/3.214.197.113\/wp-json\/wp\/v2\/comments?post=1223"}],"version-history":[{"count":0,"href":"https:\/\/3.214.197.113\/wp-json\/wp\/v2\/posts\/1223\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/3.214.197.113\/wp-json\/wp\/v2\/media\/2248"}],"wp:attachment":[{"href":"https:\/\/3.214.197.113\/wp-json\/wp\/v2\/media?parent=1223"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/3.214.197.113\/wp-json\/wp\/v2\/categories?post=1223"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/3.214.197.113\/wp-json\/wp\/v2\/tags?post=1223"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}